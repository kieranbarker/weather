var showWeather=function(options){"use strict";var defaults={selector:"#app",units:"M",message:"Right now in {city}, it's {temperature} and {conditions}.",icon:true};var settings=Object.assign(defaults,options);var app=document.querySelector(settings.selector);function sanitizeHTML(str){var temp=document.createElement("div");temp.textContent=str;return temp.innerHTML}function getJSON(response){return response.ok?response.json():Promise.reject(response)}function getData(url){return fetch(url).then(getJSON)}function configureUnits(unitsSetting,data){unitsSetting=unitsSetting.toLowerCase();if(unitsSetting==="m")return"C";if(unitsSetting==="i")return"F"}function configureIcon(iconSetting,data){var icon="";if(iconSetting){icon+="<img src='https://www.weatherbit.io/static/img/icons/"+sanitizeHTML(data.weather.icon)+".png' alt='"+sanitizeHTML(data.weather.description)+"'>"}return icon}function insertData(data){var icon,units;data=data["data"][0];icon=configureIcon(settings.icon,data);units=configureUnits(settings.units,data);app.innerHTML=icon+"<p>"+settings.message.replace("{city}",sanitizeHTML(data.city_name)).replace("{temperature}",sanitizeHTML(data.temp)+"&deg;"+units).replace("{conditions}",sanitizeHTML(data.weather.description).toLowerCase())+"</p>"}function getWeather(data){return getData("https://api.weatherbit.io/v2.0/current"+"?key="+"ee0dd94ba1d741ef95017dd656b88a52"+"&units="+settings.units.toUpperCase()+"&city="+data.city+"&country="+data.country)}function insertError(error){app.innerHTML="<p>"+"Sorry, there was a problem getting the weather. Please try again later."+"</p>"}getData("https://ipapi.co/json").then(getWeather).then(insertData).catch(insertError)};